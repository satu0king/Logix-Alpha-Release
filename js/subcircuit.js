function loadSubCircuit(_0x7821x1,_0x7821x2){var _0x7821x3= new SubCircuit(_0x7821x1["x"],_0x7821x1["y"],_0x7821x2,_0x7821x1["id"],_0x7821x1)}function SubCircuit(_0x7821x5,_0x7821x6,_0x7821x2= globalScope,_0x7821x7= undefined,_0x7821x1= undefined){this["id"]= _0x7821x7|| prompt("Enter Id: ");if(scopeList[this["id"]]== undefined){showError("SubCircuit : "+ ((_0x7821x1&& _0x7821x1["title"])|| this["id"])+ " Not found")}else {if(scopeList[this["id"]]["checkDependency"](_0x7821x2["id"])){showError("Cyclic Circuit Error")}};if(scopeList[this["id"]]== undefined|| scopeList[this["id"]]["checkDependency"](_0x7821x2["id"])){if(_0x7821x1){for(var _0x7821x8=0;_0x7821x8< _0x7821x1["inputNodes"]["length"];_0x7821x8++){_0x7821x2["allNodes"][_0x7821x1["inputNodes"][_0x7821x8]]["deleted"]= true};for(var _0x7821x8=0;_0x7821x8< _0x7821x1["outputNodes"]["length"];_0x7821x8++){_0x7821x2["allNodes"][_0x7821x1["outputNodes"][_0x7821x8]]["deleted"]= true}};return};CircuitElement["call"](this,_0x7821x5,_0x7821x6,_0x7821x2,"RIGHT",1);this["directionFixed"]= true;this["fixedBitWidth"]= true;this["savedData"]= _0x7821x1;this["localScope"]=  new Scope();this["inputNodes"]= [];this["outputNodes"]= [];this["width"]= 0;this["height"]= 0;this["title"]= "";if(this["savedData"]!= undefined){this["height"]= _0x7821x1["height"];this["width"]= _0x7821x1["width"];this["setDimensions"](this["width"]/ 2,this["height"]/ 2);this["id"]= _0x7821x1["id"];for(var _0x7821x8=0;_0x7821x8< this["savedData"]["inputNodes"]["length"];_0x7821x8++){this["inputNodes"]["push"](this["scope"]["allNodes"][this["savedData"]["inputNodes"][_0x7821x8]]);this["inputNodes"][_0x7821x8]["parent"]= this};for(var _0x7821x8=0;_0x7821x8< this["savedData"]["outputNodes"]["length"];_0x7821x8++){this["outputNodes"]["push"](this["scope"]["allNodes"][this["savedData"]["outputNodes"][_0x7821x8]]);this["outputNodes"][_0x7821x8]["parent"]= this};this["nodeList"]["extend"](this["inputNodes"]);this["nodeList"]["extend"](this["outputNodes"])};this["buildCircuit"]= function(){loadScope(this["localScope"],this["data"]);this["lastUpdated"]= scopeList[this["id"]]["timeStamp"];updateSimulation= true;updateCanvas= true;this["width"]= 100;this["localScope"]["name"]= this["title"];this["height"]= Math["max"](this["localScope"]["Input"]["length"],this["localScope"]["Output"]["length"])* 20+ 30;this["setDimensions"](this["width"]/ 2,this["height"]/ 2);if(this["savedData"]== undefined){for(var _0x7821x8=0;_0x7821x8< this["localScope"]["Input"]["length"];_0x7821x8++){var _0x7821x9= new Node(-this["width"]/ 2,-this["localScope"]["Input"]["length"]* 10 + 20* _0x7821x8 + 10,0,this,this["localScope"]["Input"][_0x7821x8]["bitWidth"]);this["inputNodes"]["push"](_0x7821x9)};for(var _0x7821x8=0;_0x7821x8< this["localScope"]["Output"]["length"];_0x7821x8++){var _0x7821x9= new Node(this["width"]/ 2,-this["localScope"]["Output"]["length"]* 10 + 20* _0x7821x8 + 10,1,this,this["localScope"]["Output"][_0x7821x8]["bitWidth"]);this["outputNodes"]["push"](_0x7821x9)}}};this["data"]= JSON["parse"](scheduleBackup(scopeList[this["id"]]));this["title"]= scopeList[this["id"]]["name"];this["buildCircuit"]();this["reBuild"]= function(){ new SubCircuit(_0x7821x5= this["x"],_0x7821x6= this["y"],_0x7821x2= this["scope"],this["direction"],this["id"]);this["delete"]()};this["reBuildCircuit"]= function(){this["data"]= JSON["parse"](scheduleBackup(scopeList[this["id"]]));this["localScope"]=  new Scope();loadScope(this["localScope"],this["data"]);this["lastUpdated"]= scopeList[this["id"]]["timeStamp"]};this["reset"]= function(){if(scopeList[this["id"]]["Input"]["length"]== this["inputNodes"]["length"]){l= scopeList[this["id"]]["Input"];for(var _0x7821x8=0;_0x7821x8< l["length"];_0x7821x8++){this["inputNodes"][_0x7821x8]["bitWidth"]= l[_0x7821x8]["bitWidth"]}}else {this["reBuild"]();return};if(scopeList[this["id"]]["Output"]["length"]== this["outputNodes"]["length"]){l= scopeList[this["id"]]["Output"];for(var _0x7821x8=0;_0x7821x8< l["length"];_0x7821x8++){this["outputNodes"][_0x7821x8]["bitWidth"]= l[_0x7821x8]["bitWidth"]}}else {this["reBuild"]();return};if(scopeList[this["id"]]["timeStamp"]> this["lastUpdated"]){this["reBuildCircuit"]()};for(var _0x7821x8=0;_0x7821x8< this["localScope"]["allNodes"]["length"];_0x7821x8++){this["localScope"]["allNodes"][_0x7821x8]["reset"]()};for(var _0x7821x8=0;_0x7821x8< this["localScope"]["SubCircuit"]["length"];_0x7821x8++){this["localScope"]["SubCircuit"][_0x7821x8]["reset"]()}};this["click"]= function(){};this["dblclick"]= function(){switchCircuit(this["id"])};this["saveObject"]= function(){var _0x7821xa={x:this["x"],y:this["y"],id:this["id"],title:this["title"],height:this["height"],width:this["width"],dir:this["direction"],inputNodes:this["inputNodes"]["map"](findNode),outputNodes:this["outputNodes"]["map"](findNode)};return _0x7821xa};this["resolve"]= function(){for(_0x7821x8= 0;_0x7821x8< this["localScope"]["Input"]["length"];_0x7821x8++){this["localScope"]["Input"][_0x7821x8]["state"]= this["inputNodes"][_0x7821x8]["value"]};for(_0x7821x8= 0;_0x7821x8< this["localScope"]["Input"]["length"];_0x7821x8++){this["localScope"]["stack"]["push"](this["localScope"]["Input"][_0x7821x8])};play(this["localScope"]);for(_0x7821x8= 0;_0x7821x8< this["localScope"]["Output"]["length"];_0x7821x8++){this["outputNodes"][_0x7821x8]["value"]= this["localScope"]["Output"][_0x7821x8]["inp1"]["value"]};for(_0x7821x8= 0;_0x7821x8< this["localScope"]["Output"]["length"];_0x7821x8++){this["scope"]["stack"]["push"](this["outputNodes"][_0x7821x8])}};this["customDraw"]= function(){ctx= simulationArea["context"];ctx["lineWidth"]= globalScope["scale"]* 3;ctx["strokeStyle"]= "black";ctx["fillStyle"]= "white";var _0x7821xb=this["x"];var _0x7821xc=this["y"];ctx["beginPath"]();ctx["textAlign"]= "center";ctx["fillStyle"]= "black";fillText(ctx,this["title"],_0x7821xb,_0x7821xc- this["height"]/ 2+ 13,14);ctx["textAlign"]= "left";for(var _0x7821x8=0;_0x7821x8< this["localScope"]["Input"]["length"];_0x7821x8++){fillText(ctx,this["localScope"]["Input"][_0x7821x8]["label"],-this["width"]/ 2 + 5 + _0x7821xb,_0x7821xc- this["localScope"]["Input"]["length"]* 10+ 20* _0x7821x8+ 10+ 5,14)};ctx["textAlign"]= "right";for(var _0x7821x8=0;_0x7821x8< this["localScope"]["Output"]["length"];_0x7821x8++){fillText(ctx,this["localScope"]["Output"][_0x7821x8]["label"],this["width"]/ 2- 5+ _0x7821xb,_0x7821xc- this["localScope"]["Output"]["length"]* 10+ 20* _0x7821x8+ 10+ 5,14)};ctx["fill"]();for(var _0x7821x8=0;_0x7821x8< this["inputNodes"]["length"];_0x7821x8++){this["inputNodes"][_0x7821x8]["draw"]()};for(var _0x7821x8=0;_0x7821x8< this["outputNodes"]["length"];_0x7821x8++){this["outputNodes"][_0x7821x8]["draw"]()}}}
